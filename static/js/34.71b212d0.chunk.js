(this["webpackJsonpUNEXTRA BACKEND"]=this["webpackJsonpUNEXTRA BACKEND"]||[]).push([[34],{1051:function(e,t,c){"use strict";c.r(t),c.d(t,"GRAPHQL_ENDPOINT",(function(){return p})),c.d(t,"GRAPHQL_SUBSCRIPTIONS",(function(){return g})),c.d(t,"SECRET_KEY",(function(){return D})),c.d(t,"AUTH_JWT",(function(){return v}));var s,a,r=c(451),n=c(4),i=c(1087),j=c(408),l=c(402),b=c(407),d=c(409),o=c(52),O=c(145),u=c(470),x=c(413),h=c(440),F=c(144),m=c(21);const p="https://unextra.hasura.app/v1/graphql",g="wss://unextra.hasura.app/v1/graphql",D="2tGF4WeLMIOsP/Q/h/VS2cd++EmJzMcb",v="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwczovL2hhc3VyYS5pby9qd3QvY2xhaW1zIjp7IngtaGFzdXJhLWFsbG93ZWQtcm9sZXMiOlsiYW5vbnltb3VzIl0sIngtaGFzdXJhLWRlZmF1bHQtcm9sZSI6ImFub255bW91cyJ9fQ.HM2vL95bDWL2xTMwCXXDatxlfLMd_8-Mx1ymyMiCKb4",y=Object(F.a)();t.default=()=>{const[e,t]=Object(n.useState)(0),[c,D]=Object(n.useState)([]),[B,k]=Object(n.useState)([]),[E,T]=Object(n.useState)([]),[N,f]=Object(n.useState)([]),[S,w]=Object(n.useState)([]),[C,I]=Object(n.useState)([]),[J,L]=Object(n.useState)([]),[q,z]=Object(n.useState)([]),[A,M]=Object(n.useState)([]),[R,W]=Object(n.useState)([]),[X,G]=Object(n.useState)([]),[Q,H]=Object(n.useState)([]),[P,U]=Object(n.useState)(!0);Object(n.useEffect)((()=>{const e=_();!async function(){const t=(await e.query({query:Object(i.a)(s||(s=Object(r.a)(["\n          query {\n            extra(limit: 100000) {\n              id\n              job\n            }\n          }\n        "])))})).data.extra,c={};t.forEach((e=>{c[e.id]=e.job})),e.query({query:Object(i.a)(a||(a=Object(r.a)(["\n            query {\n              user(limit: 100000) {\n                id\n                idExtra\n                category\n                gender\n                company {\n                  id\n                  latitude\n                }\n              }\n            }\n          "])))}).then((e=>{const t=e.data.user,s=new Date,a=new Date;a.setDate(a.getDate()-1);const r=new Date,n=new Date;r.setDate(r.getDate()-8),n.setDate(n.getDate()-31);const i=Object(F.c)(y,"usersList");Object(F.b)(i,(e=>{const i=e.val(),j=i.filter((e=>new Date(e.metadata.creationTime).getTime()>a.getTime())),l=i.filter((e=>new Date(e.metadata.creationTime).getTime()<s.getTime()&&new Date(e.metadata.creationTime).getTime()>r.getTime())),b=i.filter((e=>new Date(e.metadata.creationTime).getTime()<s.getTime()&&new Date(e.metadata.creationTime).getTime()>n.getTime())),d=i.filter((e=>new Date(e.metadata.creationTime).getTime()<s.getTime())),o=j.map((e=>e.uid));let O=t.filter((e=>o.includes(e.id)&&null==e.company));const u=l.map((e=>e.uid));let x=t.filter((e=>u.includes(e.id)&&null==e.company));const h=b.map((e=>e.uid));let F=t.filter((e=>h.includes(e.id)&&null==e.company));const m=d.map((e=>e.uid));let p=t.filter((e=>m.includes(e.id)&&null==e.company));O=O.map((e=>({...e,job:c[e.idExtra]}))),x=x.map((e=>({...e,job:c[e.idExtra]}))),F=F.map((e=>({...e,job:c[e.idExtra]}))),p=p.map((e=>({...e,job:c[e.idExtra]}))),D(O),f(x),L(F),W(p);const g=O.reduce(((e,t)=>{var c;const{category:s}=t;return e[s]=null!==(c=e[s])&&void 0!==c?c:[],e[s].push(t),e}),{}),v=x.reduce(((e,t)=>{var c;const{category:s}=t;return e[s]=null!==(c=e[s])&&void 0!==c?c:[],e[s].push(t),e}),{}),y=F.reduce(((e,t)=>{var c;const{category:s}=t;return e[s]=null!==(c=e[s])&&void 0!==c?c:[],e[s].push(t),e}),{}),B=p.reduce(((e,t)=>{var c;const{category:s}=t;return e[s]=null!==(c=e[s])&&void 0!==c?c:[],e[s].push(t),e}),{}),E=O.reduce(((e,t)=>{var c;const{job:s}=t;return e[s]=null!==(c=e[s])&&void 0!==c?c:[],e[s].push(t),e}),{}),N=x.reduce(((e,t)=>{var c;const{job:s}=t;return e[s]=null!==(c=e[s])&&void 0!==c?c:[],e[s].push(t),e}),{}),S=F.reduce(((e,t)=>{var c;const{job:s}=t;return e[s]=null!==(c=e[s])&&void 0!==c?c:[],e[s].push(t),e}),{}),C=p.reduce(((e,t)=>{var c;const{job:s}=t;return e[s]=null!==(c=e[s])&&void 0!==c?c:[],e[s].push(t),e}),{});T(E),k(g),I(N),w(v),M(S),z(y),H(C),G(B)}))})),setTimeout((()=>{U(!1)}),1e3)}()}),[]);const _=()=>{const e=new j.a({uri:p,headers:{Authorization:"Bearer ".concat(v)}}),t=new O.a({uri:g,headers:{Authorization:"Bearer ".concat(v)},options:{reconnect:!0}}),c=Object(l.a)((e=>{let{query:t}=e;const c=Object(o.e)(t);return"OperationDefinition"===c.kind&&"subscription"===c.operation}),t,e);return new b.a({link:c,cache:new d.a})};return P?Object(m.jsx)(x.rb,{className:"justify-content-center",children:Object(m.jsx)(x.B,{className:"p-4",xs:6,children:Object(m.jsx)(u.a,{height:"100",width:"100",color:"grey",ariaLabel:"loading"})})}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(x.jb,{variant:"tabs",children:[Object(m.jsx)(x.kb,{children:Object(m.jsx)(x.lb,{onClick:()=>t(0),active:0==e,style:{cursor:"pointer",color:0==e?"#2500D2":"black"},children:"Dernieres 24h"})}),Object(m.jsx)(x.kb,{children:Object(m.jsx)(x.lb,{onClick:()=>t(1),active:1==e,style:{cursor:"pointer",color:1==e?"#2500D2":"black"},children:"Semaine"})}),Object(m.jsx)(x.kb,{children:Object(m.jsx)(x.lb,{onClick:()=>t(2),active:2==e,style:{cursor:"pointer",color:2==e?"#2500D2":"black"},children:"Mois"})}),Object(m.jsx)(x.kb,{children:Object(m.jsx)(x.lb,{onClick:()=>t(3),active:3==e,style:{cursor:"pointer",color:3==e?"#2500D2":"black"},children:"Total"})})]}),0==e&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x.rb,{children:Object(m.jsx)(x.B,{xs:6,children:Object(m.jsxs)("div",{className:"mt-4",children:["Nombre extras inscrits : ",c.length]})})}),Object(m.jsxs)(x.rb,{children:[Object(m.jsx)(x.B,{xs:6,children:Object(m.jsxs)(x.o,{className:"mb-4 mt-4",children:[Object(m.jsx)(x.s,{children:"Extras inscrits par cat\xe9gorie"}),Object(m.jsx)(x.p,{children:Object(m.jsx)(h.c,{data:{labels:Object.keys(B),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(B).map((e=>e.length))}]}})})]})}),Object(m.jsx)(x.B,{xs:6,children:Object(m.jsxs)(x.o,{className:"mb-4 mt-4",children:[Object(m.jsx)(x.s,{children:"Extras inscrits par job"}),Object(m.jsx)(x.p,{children:Object(m.jsx)(h.c,{data:{labels:Object.keys(E),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(E).map((e=>e.length))}]}})})]})})]})]}),1==e&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x.rb,{children:Object(m.jsx)(x.B,{xs:6,children:Object(m.jsxs)("div",{className:"mt-4",children:["Nombre extras inscrits : ",N.length]})})}),Object(m.jsxs)(x.rb,{children:[Object(m.jsx)(x.B,{xs:6,children:Object(m.jsxs)(x.o,{className:"mb-4 mt-4",children:[Object(m.jsx)(x.s,{children:"Extras inscrits par cat\xe9gorie"}),Object(m.jsx)(x.p,{children:Object(m.jsx)(h.c,{data:{labels:Object.keys(S),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(S).map((e=>e.length))}]}})})]})}),Object(m.jsx)(x.B,{xs:6,children:Object(m.jsxs)(x.o,{className:"mb-4 mt-4",children:[Object(m.jsx)(x.s,{children:"Extras inscrits par job"}),Object(m.jsx)(x.p,{children:Object(m.jsx)(h.c,{data:{labels:Object.keys(C),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(C).map((e=>e.length))}]}})})]})})]})]}),2==e&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x.rb,{children:Object(m.jsx)(x.B,{xs:6,children:Object(m.jsxs)("div",{className:"mt-4",children:["Nombre extras inscrits : ",J.length]})})}),Object(m.jsxs)(x.rb,{children:[Object(m.jsx)(x.B,{xs:6,children:Object(m.jsxs)(x.o,{className:"mb-4 mt-4",children:[Object(m.jsx)(x.s,{children:"Extras inscrits par cat\xe9gorie"}),Object(m.jsx)(x.p,{children:Object(m.jsx)(h.c,{data:{labels:Object.keys(q),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(q).map((e=>e.length))}]}})})]})}),Object(m.jsx)(x.B,{xs:6,children:Object(m.jsxs)(x.o,{className:"mb-4 mt-4",children:[Object(m.jsx)(x.s,{children:"Extras inscrits par job"}),Object(m.jsx)(x.p,{children:Object(m.jsx)(h.c,{data:{labels:Object.keys(A),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(A).map((e=>e.length))}]}})})]})})]})]}),3==e&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x.rb,{children:Object(m.jsx)(x.B,{xs:6,children:Object(m.jsxs)("div",{className:"mt-4",children:["Nombre extras inscrits : ",R.length]})})}),Object(m.jsxs)(x.rb,{children:[Object(m.jsx)(x.B,{xs:6,children:Object(m.jsxs)(x.o,{className:"mb-4 mt-4",children:[Object(m.jsx)(x.s,{children:"Extras inscrits par cat\xe9gorie"}),Object(m.jsx)(x.p,{children:Object(m.jsx)(h.c,{data:{labels:Object.keys(X),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(X).map((e=>e.length))}]}})})]})}),Object(m.jsx)(x.B,{xs:6,children:Object(m.jsxs)(x.o,{className:"mb-4 mt-4",children:[Object(m.jsx)(x.s,{children:"Extras inscrits par job"}),Object(m.jsx)(x.p,{children:Object(m.jsx)(h.c,{data:{labels:Object.keys(Q),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(Q).map((e=>e.length))}]}})})]})})]})]})]})}}}]);
//# sourceMappingURL=34.71b212d0.chunk.js.map