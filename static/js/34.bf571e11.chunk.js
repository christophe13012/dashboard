(this.webpackJsonpunextradashboard=this.webpackJsonpunextradashboard||[]).push([[34],{1052:function(e,t,s){"use strict";s.r(t),s.d(t,"GRAPHQL_ENDPOINT",(function(){return g})),s.d(t,"GRAPHQL_SUBSCRIPTIONS",(function(){return D})),s.d(t,"SECRET_KEY",(function(){return v})),s.d(t,"AUTH_JWT",(function(){return B}));var c,a,r=s(451),n=s(4),j=s(1088),l=s(408),i=s(402),b=s(407),d=s(409),o=s(52),F=s(145),O=s(470),u=s(413),x=s(440),h=s(144),m=s(528),p=s(21);const g="https://unextra.hasura.app/v1/graphql",D="wss://unextra.hasura.app/v1/graphql",v="2tGF4WeLMIOsP/Q/h/VS2cd++EmJzMcb",B="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwczovL2hhc3VyYS5pby9qd3QvY2xhaW1zIjp7IngtaGFzdXJhLWFsbG93ZWQtcm9sZXMiOlsiYW5vbnltb3VzIl0sIngtaGFzdXJhLWRlZmF1bHQtcm9sZSI6ImFub255bW91cyJ9fQ.HM2vL95bDWL2xTMwCXXDatxlfLMd_8-Mx1ymyMiCKb4",y=Object(h.a)();t.default=()=>{const[e,t]=Object(n.useState)(0),[s,v]=Object(n.useState)([]),[k,E]=Object(n.useState)([]),[S,C]=Object(n.useState)([]),[N,T]=Object(n.useState)([]),[f,w]=Object(n.useState)([]),[I,J]=Object(n.useState)([]),[L,q]=Object(n.useState)([]),[W,z]=Object(n.useState)([]),[M,G]=Object(n.useState)([]),[Q,R]=Object(n.useState)([]),[H,X]=Object(n.useState)([]),[A,P]=Object(n.useState)([]),[_,V]=Object(n.useState)([]),[Y,Z]=Object(n.useState)([]),[U,K]=Object(n.useState)([]),[$,ee]=Object(n.useState)([]),[te,se]=Object(n.useState)(!0);Object(n.useEffect)((()=>{const e=ce();!async function(){const t=(await e.query({query:Object(j.a)(c||(c=Object(r.a)(["\n          query {\n            extra(limit: 100000) {\n              id\n              job\n            }\n          }\n        "])))})).data.extra,s={};t.forEach((e=>{s[e.id]=e.job})),e.query({query:Object(j.a)(a||(a=Object(r.a)(["\n            query {\n              user(limit: 100000) {\n                id\n                idExtra\n                category\n                gender\n                postalCode\n                company {\n                  id\n                  latitude\n                }\n              }\n            }\n          "])))}).then((e=>{const t=e.data.user;console.log("usersInWork",t);const c=new Date,a=new Date;a.setDate(a.getDate()-1);const r=new Date,n=new Date;r.setDate(r.getDate()-8),n.setDate(n.getDate()-31);const j=Object(h.c)(y,"usersList");Object(h.b)(j,(e=>{const j=e.val(),l=j.filter((e=>new Date(e.metadata.creationTime).getTime()>a.getTime())),i=j.filter((e=>new Date(e.metadata.creationTime).getTime()<c.getTime()&&new Date(e.metadata.creationTime).getTime()>r.getTime())),b=j.filter((e=>new Date(e.metadata.creationTime).getTime()<c.getTime()&&new Date(e.metadata.creationTime).getTime()>n.getTime())),d=j.filter((e=>new Date(e.metadata.creationTime).getTime()<c.getTime())),o=l.map((e=>e.uid));let F=t.filter((e=>o.includes(e.id)&&null==e.company));const O=i.map((e=>e.uid));let u=t.filter((e=>O.includes(e.id)&&null==e.company));const x=b.map((e=>e.uid));let h=t.filter((e=>x.includes(e.id)&&null==e.company));const p=d.map((e=>e.uid));let g=t.filter((e=>p.includes(e.id)&&null==e.company));F=F.map((e=>({...e,job:s[e.idExtra]}))),u=u.map((e=>({...e,job:s[e.idExtra]}))),h=h.map((e=>({...e,job:s[e.idExtra]}))),g=g.map((e=>({...e,job:s[e.idExtra]}))),v(F),w(u),G(h),V(g);const D=F.reduce(((e,t)=>{var s;const{category:c}=t;return e[c]=null!==(s=e[c])&&void 0!==s?s:[],e[c].push(t),e}),{}),B=F.reduce(((e,t)=>{var s;const{postalCode:c}=t,a=c?c.toString().substring(0,2):"nc";return e[m.a[a]]=null!==(s=e[m.a[a]])&&void 0!==s?s:[],e[m.a[a]].push(t),e}),{}),y=u.reduce(((e,t)=>{var s;const{postalCode:c}=t,a=c?c.toString().substring(0,2):"nc";return e[m.a[a]]=null!==(s=e[m.a[a]])&&void 0!==s?s:[],e[m.a[a]].push(t),e}),{}),k=h.reduce(((e,t)=>{var s;const{postalCode:c}=t,a=c?c.toString().substring(0,2):"nc";return e[m.a[a]]=null!==(s=e[m.a[a]])&&void 0!==s?s:[],e[m.a[a]].push(t),e}),{}),S=g.reduce(((e,t)=>{var s;const{postalCode:c}=t,a=c?c.toString().substring(0,2):"nc";return e[m.a[a]]=null!==(s=e[m.a[a]])&&void 0!==s?s:[],e[m.a[a]].push(t),e}),{}),N=u.reduce(((e,t)=>{var s;const{category:c}=t;return e[c]=null!==(s=e[c])&&void 0!==s?s:[],e[c].push(t),e}),{}),f=h.reduce(((e,t)=>{var s;const{category:c}=t;return e[c]=null!==(s=e[c])&&void 0!==s?s:[],e[c].push(t),e}),{}),I=g.reduce(((e,t)=>{var s;const{category:c}=t;return e[c]=null!==(s=e[c])&&void 0!==s?s:[],e[c].push(t),e}),{}),L=F.reduce(((e,t)=>{var s;const{job:c}=t;return e[c]=null!==(s=e[c])&&void 0!==s?s:[],e[c].push(t),e}),{}),W=u.reduce(((e,t)=>{var s;const{job:c}=t;return e[c]=null!==(s=e[c])&&void 0!==s?s:[],e[c].push(t),e}),{}),M=h.reduce(((e,t)=>{var s;const{job:c}=t;return e[c]=null!==(s=e[c])&&void 0!==s?s:[],e[c].push(t),e}),{}),Q=g.reduce(((e,t)=>{var s;const{job:c}=t;return e[c]=null!==(s=e[c])&&void 0!==s?s:[],e[c].push(t),e}),{});C(L),E(D),T(B),q(W),J(N),z(y),X(M),R(f),P(k),K(Q),Z(I),ee(S)}))})),setTimeout((()=>{se(!1)}),1e3)}()}),[]);const ce=()=>{const e=new l.a({uri:g,headers:{Authorization:"Bearer ".concat(B)}}),t=new F.a({uri:D,headers:{Authorization:"Bearer ".concat(B)},options:{reconnect:!0}}),s=Object(i.a)((e=>{let{query:t}=e;const s=Object(o.e)(t);return"OperationDefinition"===s.kind&&"subscription"===s.operation}),t,e);return new b.a({link:s,cache:new d.a})};return te?Object(p.jsx)(u.rb,{className:"justify-content-center",children:Object(p.jsx)(u.B,{className:"p-4",xs:6,children:Object(p.jsx)(O.a,{height:"100",width:"100",color:"grey",ariaLabel:"loading"})})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(u.jb,{variant:"tabs",children:[Object(p.jsx)(u.kb,{children:Object(p.jsx)(u.lb,{onClick:()=>t(0),active:0==e,style:{cursor:"pointer",color:0==e?"#2500D2":"black"},children:"Dernieres 24h"})}),Object(p.jsx)(u.kb,{children:Object(p.jsx)(u.lb,{onClick:()=>t(1),active:1==e,style:{cursor:"pointer",color:1==e?"#2500D2":"black"},children:"Semaine"})}),Object(p.jsx)(u.kb,{children:Object(p.jsx)(u.lb,{onClick:()=>t(2),active:2==e,style:{cursor:"pointer",color:2==e?"#2500D2":"black"},children:"Mois"})}),Object(p.jsx)(u.kb,{children:Object(p.jsx)(u.lb,{onClick:()=>t(3),active:3==e,style:{cursor:"pointer",color:3==e?"#2500D2":"black"},children:"Total"})})]}),0==e&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.rb,{children:Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)("div",{className:"mt-4",children:["Nombre extras inscrits : ",s.length]})})}),Object(p.jsxs)(u.rb,{children:[Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)(u.o,{className:"mb-4 mt-4",children:[Object(p.jsx)(u.s,{children:"Extras inscrits par cat\xe9gorie"}),Object(p.jsx)(u.p,{children:Object(p.jsx)(x.c,{data:{labels:Object.keys(k),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(k).map((e=>e.length))}]}})})]})}),Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)(u.o,{className:"mb-4 mt-4",children:[Object(p.jsx)(u.s,{children:"Extras inscrits par job"}),Object(p.jsx)(u.p,{children:Object(p.jsx)(x.c,{data:{labels:Object.keys(S),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(S).map((e=>e.length))}]}})})]})})]}),Object(p.jsx)(u.rb,{children:Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)(u.o,{className:"mb-4 mt-4",children:[Object(p.jsx)(u.s,{children:"Extras inscrits par D\xe9partement"}),Object(p.jsx)(u.p,{children:Object(p.jsx)(x.c,{data:{labels:Object.keys(N),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(N).map((e=>e.length))}]}})})]})})})]}),1==e&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.rb,{children:Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)("div",{className:"mt-4",children:["Nombre extras inscrits : ",f.length]})})}),Object(p.jsxs)(u.rb,{children:[Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)(u.o,{className:"mb-4 mt-4",children:[Object(p.jsx)(u.s,{children:"Extras inscrits par cat\xe9gorie"}),Object(p.jsx)(u.p,{children:Object(p.jsx)(x.c,{data:{labels:Object.keys(I),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(I).map((e=>e.length))}]}})})]})}),Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)(u.o,{className:"mb-4 mt-4",children:[Object(p.jsx)(u.s,{children:"Extras inscrits par job"}),Object(p.jsx)(u.p,{children:Object(p.jsx)(x.c,{data:{labels:Object.keys(L),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(L).map((e=>e.length))}]}})})]})})]}),Object(p.jsx)(u.rb,{children:Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)(u.o,{className:"mb-4 mt-4",children:[Object(p.jsx)(u.s,{children:"Extras inscrits par D\xe9partement"}),Object(p.jsx)(u.p,{children:Object(p.jsx)(x.c,{data:{labels:Object.keys(W),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(W).map((e=>e.length))}]}})})]})})})]}),2==e&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.rb,{children:Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)("div",{className:"mt-4",children:["Nombre extras inscrits : ",M.length]})})}),Object(p.jsxs)(u.rb,{children:[Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)(u.o,{className:"mb-4 mt-4",children:[Object(p.jsx)(u.s,{children:"Extras inscrits par cat\xe9gorie"}),Object(p.jsx)(u.p,{children:Object(p.jsx)(x.c,{data:{labels:Object.keys(Q),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(Q).map((e=>e.length))}]}})})]})}),Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)(u.o,{className:"mb-4 mt-4",children:[Object(p.jsx)(u.s,{children:"Extras inscrits par job"}),Object(p.jsx)(u.p,{children:Object(p.jsx)(x.c,{data:{labels:Object.keys(H),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(H).map((e=>e.length))}]}})})]})})]}),Object(p.jsx)(u.rb,{children:Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)(u.o,{className:"mb-4 mt-4",children:[Object(p.jsx)(u.s,{children:"Extras inscrits par D\xe9partement"}),Object(p.jsx)(u.p,{children:Object(p.jsx)(x.c,{data:{labels:Object.keys(A),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(A).map((e=>e.length))}]}})})]})})})]}),3==e&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.rb,{children:Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)("div",{className:"mt-4",children:["Nombre extras inscrits : ",_.length]})})}),Object(p.jsxs)(u.rb,{children:[Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)(u.o,{className:"mb-4 mt-4",children:[Object(p.jsx)(u.s,{children:"Extras inscrits par cat\xe9gorie"}),Object(p.jsx)(u.p,{children:Object(p.jsx)(x.c,{data:{labels:Object.keys(Y),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(Y).map((e=>e.length))}]}})})]})}),Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)(u.o,{className:"mb-4 mt-4",children:[Object(p.jsx)(u.s,{children:"Extras inscrits par job"}),Object(p.jsx)(u.p,{children:Object(p.jsx)(x.c,{data:{labels:Object.keys(U),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values(U).map((e=>e.length))}]}})})]})})]}),Object(p.jsx)(u.rb,{children:Object(p.jsx)(u.B,{xs:6,children:Object(p.jsxs)(u.o,{className:"mb-4 mt-4",children:[Object(p.jsx)(u.s,{children:"Extras inscrits par D\xe9partement"}),Object(p.jsx)(u.p,{children:Object(p.jsx)(x.c,{data:{labels:Object.keys($),datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF0000","#800000","#808000","#00FF00","#008000","#808080","#0000FF","#000080","#FF00FF","#800080"],data:Object.values($).map((e=>e.length))}]}})})]})})})]})]})}}}]);
//# sourceMappingURL=34.bf571e11.chunk.js.map